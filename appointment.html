<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultation</title>
    <style>
        body{
            background: radial-gradient(827px at 47.3% 48%, rgb(255, 255, 255) 0%, rgb(138, 192, 216) 90%);
            
        }
        .text{
            width:100%;
             display:flex;
             justify-content: center;
             align-items: center;
             flex-direction: column;
             text-align: center;
             margin:20px auto;
             font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        }
        
        .one {
              
           
             display:inline-block;
             margin-left:auto;
             margin-right:auto;
             text-align: left;
            

            
            
        }
        div.form{
            display: block;
            text-align: center;
        
        }


        .two{
            width:90%;
             display:flex;
             justify-content: center;
             
             align-items: center;
             flex-direction: column;
             text-align: center;
             margin:20px auto;
        }
        .saloni{
            justify-content: center;
            display: flex;
            
            margin: 50px 100px 50px 100px;
            border :3px soild blue;
            padding :30px;
            background-color: rgb(138, 192, 216);
            
        }
        .name{
            
            gap:1000px;
            
        }
        .btn{
            
            /* display: flex;
            flex-direction: row;
            display: inline-block;
            color: #fff;
            background-color: #0084ff;
            border: none;
            border-radius: 5px;
            padding:12px 20 px;
            font-size :18px;
            cursor:pointer;  */
            color: #fff;
            padding: 15px 25px;
            background-color: #38D2D2;
            background-image: radial-gradient(93% 87% at 87% 89%, rgba(0, 0, 0, 0.23) 0%, transparent 86.18%), radial-gradient(66% 66% at 26% 20%, rgba(255, 255, 255, 0.55) 0%, rgba(255, 255, 255, 0) 69.79%, rgba(255, 255, 255, 0) 100%);
            box-shadow: inset -3px -3px 9px rgba(255, 255, 255, 0.25), inset 0px 3px 9px rgba(255, 255, 255, 0.3), inset 0px 1px 1px rgba(255, 255, 255, 0.6), inset 0px -8px 36px rgba(0, 0, 0, 0.3), inset 0px 1px 5px rgba(255, 255, 255, 0.6), 2px 19px 31px rgba(0, 0, 0, 0.2);
            border-radius: 14px;
            font-weight: bold;
            font-size: 16px;

            border: 0;

            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;

            cursor: pointer;
        }
        /* .contact{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap:40px;
            text-align: center;
        
        }
        .doc{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap:40px;
             */

         /* }
        .date{ */
            /* display: flex;
            flex-direction: row;
            justify-content: center;
            gap:40px;
            

        }
        .time{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap:40px;
            
        }
        .symptons{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap:40px;
            

        }  */ 

    </style>
</head>
  <body>
           
  
              <h1 style="font-size: xx-large" class="text">
                  Appointment Form
              </h1>
              <div class = "saloni">
              <form class ="one">
                <div class =  "name">
                <label style="font-size: x-large" >First Name</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="text" id="patient-name" class="form-control" placeholder="First Name" required><br><br>
                </div></br>
                <div class =  "name1">
                    <label style="font-size: x-large" >Last Name</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" id="patient-name1" class="form-control" placeholder="LastName" required><br><br>
                    </div></br>
                <div class="contact">
                <label style="font-size: x-large" >Contact</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="text" id="contact" class="form-control"placeholder="Phone number" required><br><br>
                </div></br>
                <div class="doc">               
                 <label style="font-size: x-large" >Doctors</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <select  id="docs"  title="Doctors><br><br>
                    <option value = "">Select</option>
                    <option value ="Dr.Manoj Kumar">Dr.Manoj Kumar</option>
                    <option value = "Dr.Sarita">Dr.Sarita</option>
                    <option value = "Dr.Sudhanshu">Dr.Sudhanshu</option>
                  </select>
                </div><br><br>
                <div class="date">
                <label style="font-size: x-large" >Date</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="date" id="date" class="form-control" placeholder="date"><br><br>
                </div></br>
                <div class="time">
                 <label style="font-size: x-large" > Time</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="time"id="time"class="form-control" placeholder="time"><br><br>
                </div></br>
                <div class="symptons">
                <label style="font-size: x-large"  > Symptoms</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <textarea id="symptoms" class="form-control" placeholder="write" required></textarea><br><br>
                </div></br>     
              </form>
              </div>
              <div class="two">
                <button  onclick = "submit()" class="btn">
                    Get Appointment
                </button>
            </div>   
</body>
</html>
<script>
    let api="http://localhost:3/Appointment";
  let submit = async(daa) => {
    event.preventDefault();
    let patient1 = document.getElementById("patient-name").value;
    console.log(patient1);
    let contact1 = document.getElementById("contact").value;
    console.log(contact1);
    selectelement = document.querySelector("#docs");
    let output = selectelement.value;
    console.log(output);
    let date1 = document.getElementById("date").value;
    console.log(date1);
    let time1 = document.getElementById("time").value;
    console.log(time1);
    textelement = document.querySelector("#symptoms");
    let input = textelement.value;
    let detailsobj = {
      patient:patient1,
      contact:contact1,
      docs:output,
      date:date1,
      time:time1,
      symptons:input,
    };
    let res = await fetch(api,{
            method:"POST",
            body: JSON.stringify(detailsobj),
            headers:{
                "Content-Type":"application/json"
            },
        });
        
        
}
let call = async () => {
    
      
    selectelement = document.querySelector("#docs");
    let output = selectelement.value;
    console.log(output);
    let res = await fetch("http://localhost:3/docobj");
    let data = await res.json();

    let res1 = await fetch("http://localhost:3/Appointment");
    let data1 = await res1.json();
    console.log(data1);
    data.forEach(({ email,password,doctoken,name }) => {
              if(output===data.name)
              {
                update(data1.id,data.doctoken);
              }})
            }
      call();
            
            
  let update = async (id,data) => {
    let res = await fetch(`${"http://localhost:3/Appointment"}/${id}`, {
      method: "PATCH",
      body: JSON.stringify({ "id":data}),
      headers: {
        "Content-Type": "application/json",
      },
    });
}
</script>
